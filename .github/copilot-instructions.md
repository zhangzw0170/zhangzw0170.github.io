<!-- Copilot / AI agent instructions for zhangzw0170.github.io -->

Purpose
- Help AI coding agents be immediately productive with this Jekyll + Chirpy-based blog repository.

Quick architecture
- Static site generated by Jekyll using the `jekyll-theme-chirpy` theme (`_config.yml`).
- Source content: `*_posts/`, `_tabs/`, `_data/`, and layouts in the theme; generated site lives in `_site/` (do not edit `_site/`).
- Local assets and vendor libraries live under `assets/` and `assets/lib/` (these are checked into the repo and copied into `_site/`).
- A small plugin `/_plugins/posts-lastmod-hook.rb` injects `last_modified_at` from git for posts.

Developer workflows (concrete commands)
- Start development server (live reload): `bash ./tools/run.sh` (options: `-H/--host`, `-p/--production`).
- Build & test for production: `bash ./tools/test.sh` — this runs `bundle exec jekyll b` and `html-proofer`.
- Bundler dependencies are declared in `Gemfile`; run `bundle install` before serving or building.
- VS Code task: use the workspace task `Run Jekyll Server` which calls `./tools/run.sh`.

Platform notes
- `tools/*.sh` are POSIX shells. On Windows use WSL, Git Bash, or a shell that can run these scripts. The project also lists Windows-specific gems in `Gemfile`.

Project-specific conventions and patterns
- Permalinks: posts follow the template in `_config.yml` (default permalink: `/posts/:title/`).
- Git metadata: `/_plugins/posts-lastmod-hook.rb` sets `post.data['last_modified_at']` using `git log` — keep posts under git control to preserve last-mod metadata.
- Do not edit files under `_site/` — they are build artifacts.
- Vendor assets: prefer adding third-party JS/CSS to `assets/lib/` (example: `assets/lib/mermaid/`, `assets/lib/mathjax/`). Files here are committed and used directly.
- To change theme behavior, prefer overriding layouts or includes in the repo rather than editing files inside the gem/theme.

Where to look for common edits
- Posts and drafts: `_posts/` and `_drafts` (front matter controls `layout`, `comments`, `toc`).
- Site-wide config: `_config.yml` (timezone, baseurl, theme options). Example: PWA is enabled in config -> `pwa.enabled: true`.
- Static vendor code and third-party libs: `assets/lib/` and `assets/`.
- Build / CI: `tools/test.sh` shows how production build and HTML checks are run; mirror these steps in CI.

Behavioral guidance for AI agents (concrete, repo-specific)
- When adding or updating posts: ensure files are committed so `last_modified_at` can be derived by the plugin.
- When modifying assets, update `assets/lib/` and reference them via the site templates; avoid editing files under `_site/`.
- When recommending commands for the human developer, include the exact script invocation (e.g. `bash ./tools/run.sh -H 127.0.0.1`).
- For changes that affect site output, run `bash ./tools/test.sh` locally to validate HTML using `html-proofer`.

Examples (copy-paste)
- Dev server (Linux / WSL / Git Bash):
  - `bash ./tools/run.sh`
- Prod build + check (Linux / WSL / Git Bash):
  - `bash ./tools/test.sh`

If something is unclear
- Ask which OS/shell the developer is using (Windows native vs WSL) before suggesting shell commands.
- If a plugin, config, or theme option is in question, point to the exact file (e.g. `_plugins/posts-lastmod-hook.rb` or `_config.yml`).

Please review and tell me if you want Chinese localization, CI snippets, or commit-message conventions added.
